{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/verify-payment-proof.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview AI flow for automatically verifying payment proofs uploaded by users.\n *\n * - verifyPaymentProof - A function that handles the payment proof verification process.\n * - VerifyPaymentProofInput - The input type for the verifyPaymentProof function.\n * - VerifyPaymentProofOutput - The return type for the verifyPaymentProof function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst VerifyPaymentProofInputSchema = z.object({\n  paymentProofDataUri: z\n    .string()\n    .describe(\n      \"The payment proof image, which can be a public URL or a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n  expectedAmount: z.number().describe('The expected payment amount.'),\n  orderId: z.string().describe('The ID of the order associated with the payment.'),\n});\nexport type VerifyPaymentProofInput = z.infer<typeof VerifyPaymentProofInputSchema>;\n\nconst VerifyPaymentProofOutputSchema = z.object({\n  isVerified: z.boolean().describe('Whether the payment proof is verified or not.'),\n  reason: z.string().describe('The reason for the verification result.'),\n});\nexport type VerifyPaymentProofOutput = z.infer<typeof VerifyPaymentProofOutputSchema>;\n\nexport async function verifyPaymentProof(input: VerifyPaymentProofInput): Promise<VerifyPaymentProofOutput> {\n  return verifyPaymentProofFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'verifyPaymentProofPrompt',\n  input: {schema: VerifyPaymentProofInputSchema},\n  output: {schema: VerifyPaymentProofOutputSchema},\n  prompt: `You are an expert payment verification specialist.\n\nYou will analyze the provided payment proof image and determine if it is a valid proof of payment for the specified amount and order.\n\nThe user has paid {{expectedAmount}}. Look for this amount in the proof.\nThe Order ID is {{orderId}}. This may or may not be present in the proof.\n\nConsider the following factors:\n- Clarity and legibility of the image.\n- Presence of key information such as amount paid, date, and transaction ID.\n- Consistency of the information with the expected amount.\n- Any obvious signs of tampering or fraud.\n\nBased on your analysis, set the isVerified output field to true if the payment proof is valid, and false otherwise. Provide a detailed reason for your decision in the reason output field. If you approve, the reason should be \"Payment confirmed via AI.\". If you reject, explain why (e.g., \"Amount does not match expected value.\", \"Image is blurry.\").\n\nPayment Proof Image: {{media url=paymentProofDataUri}}\nExpected Amount: {{{expectedAmount}}}\nOrder ID: {{{orderId}}}`,\n});\n\nconst verifyPaymentProofFlow = ai.defineFlow(\n  {\n    name: 'verifyPaymentProofFlow',\n    inputSchema: VerifyPaymentProofInputSchema,\n    outputSchema: VerifyPaymentProofOutputSchema,\n  },\n  async input => {\n    // Add a small delay to simulate processing, as local verification can be too fast.\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    try {\n      const {output} = await prompt(input);\n      if (!output) {\n        return {\n          isVerified: false,\n          reason: 'AI model did not return a valid response.'\n        }\n      }\n      return output;\n    } catch (e) {\n       console.error(\"AI verification flow failed\", e);\n       return {\n         isVerified: false,\n         reason: 'An error occurred during AI processing.'\n       }\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,gCAAgC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7C,qBAAqB,uIAAA,CAAA,IAAC,CACnB,MAAM,GACN,QAAQ,CACP;IAEJ,gBAAgB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACpC,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC/B;AAGA,MAAM,iCAAiC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9C,YAAY,uIAAA,CAAA,IAAC,CAAC,OAAO,GAAG,QAAQ,CAAC;IACjC,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC9B;AAGO,eAAe,mBAAmB,KAA8B;IACrE,OAAO,uBAAuB;AAChC;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAA6B;IAC7C,QAAQ;QAAC,QAAQ;IAA8B;IAC/C,QAAQ,CAAC;;;;;;;;;;;;;;;;;uBAiBY,CAAC;AACxB;AAEA,MAAM,yBAAyB,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC1C;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,mFAAmF;IACnF,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;IAEjD,IAAI;QACF,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;QAC9B,IAAI,CAAC,QAAQ;YACX,OAAO;gBACL,YAAY;gBACZ,QAAQ;YACV;QACF;QACA,OAAO;IACT,EAAE,OAAO,GAAG;QACT,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;YACL,YAAY;YACZ,QAAQ;QACV;IACH;AACF;;;IAtDoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["\n// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  projectId: \"hsrp-saarthi\",\n  appId: \"1:712063525086:web:be6947051395e3bcc8a24f\",\n  storageBucket: \"hsrp-saarthi.firebasestorage.app\",\n  apiKey: \"AIzaSyAjjk29wFsRLPvFB3QhdqB2v4M__N16Am8\",\n  authDomain: \"hsrp-saarthi.firebaseapp.com\",\n  messagingSenderId: \"712063525086\",\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\nexport { db, storage };\n"],"names":[],"mappings":"AACA,uDAAuD;;;;;AACvD;AAAA;AACA;AAAA;AACA;AAAA;;;;AACA,4DAA4D;AAC5D,iEAAiE;AAEjE,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,WAAW;IACX,OAAO;IACP,eAAe;IACf,QAAQ;IACR,YAAY;IACZ,mBAAmB;AACrB;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAC1B,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,UAAU,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/booking/actions.ts"],"sourcesContent":["\n\"use server\";\n\nimport {\n  verifyPaymentProof,\n} from \"@/ai/flows/verify-payment-proof\";\nimport { db } from \"@/lib/firebase\";\nimport { addDoc, collection, serverTimestamp, updateDoc, doc } from \"firebase/firestore\";\nimport { z } from \"zod\";\n\n\nconst CreateBookingInputSchema = z.object({\n  bookingData: z.any(),\n  selectedCategory: z.string(),\n  totalAmount: z.number(),\n});\n\n\nexport async function createBooking(input: z.infer<typeof CreateBookingInputSchema>) {\n  const { bookingData, selectedCategory, totalAmount } = CreateBookingInputSchema.parse(input);\n  const newOrderId = `HSRP-${Date.now()}`;\n  try {\n    const newBooking = {\n      orderId: newOrderId,\n      ...bookingData,\n      vehicleCategory: selectedCategory,\n      amount: totalAmount,\n      status: 'pending',\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n      paymentProof: '',\n      verificationReason: 'Awaiting payment proof upload.'\n    };\n    const docRef = await addDoc(collection(db, \"bookings\"), newBooking);\n    return { success: true, orderId: newOrderId, bookingId: docRef.id };\n  } catch (error) {\n     console.error(\"Booking creation failed:\", error);\n     const errorMessage = error instanceof Error ? error.message : \"An unknown error occurred.\";\n     return {\n       success: false,\n       error: `An unexpected error occurred during booking creation. ${errorMessage}`,\n     };\n  }\n}\n\nconst UpdateBookingWithPaymentInputSchema = z.object({\n    paymentProofUrl: z.string(),\n    orderId: z.string(),\n    bookingId: z.string(),\n    totalAmount: z.number(),\n});\n\n// Separate async function to handle the AI verification in the background.\nasync function triggerAiVerification(bookingId: string, paymentProofUrl: string, totalAmount: number, orderId: string) {\n    const bookingDocRef = doc(db, \"bookings\", bookingId);\n    try {\n        const verificationResult = await verifyPaymentProof({\n            paymentProofDataUri: paymentProofUrl,\n            expectedAmount: totalAmount,\n            orderId: orderId,\n        });\n\n        const finalStatus = verificationResult.isVerified ? \"payment_verified\" : \"payment_rejected\";\n        await updateDoc(bookingDocRef, {\n            status: finalStatus,\n            verificationReason: verificationResult.reason,\n            updatedAt: serverTimestamp(),\n        });\n        console.log(`AI verification completed for order ${orderId}. Status: ${finalStatus}`);\n    } catch (aiError) {\n        console.error(`AI verification failed for order ${orderId}:`, aiError);\n        // Update the status to indicate a failure in the AI verification process\n        await updateDoc(bookingDocRef, {\n            status: 'payment_verification_failed',\n            verificationReason: 'The AI verification process encountered an error.',\n            updatedAt: serverTimestamp(),\n        });\n    }\n}\n\nexport async function updateBookingWithPayment(input: z.infer<typeof UpdateBookingWithPaymentInputSchema>) {\n    const { paymentProofUrl, orderId, bookingId, totalAmount } = UpdateBookingWithPaymentInputSchema.parse(input);\n    \n    try {\n        const bookingDocRef = doc(db, \"bookings\", bookingId);\n        // First, update the booking with the proof and set status to pending verification\n        await updateDoc(bookingDocRef, {\n            paymentProof: paymentProofUrl,\n            status: 'payment_pending_verification',\n            verificationReason: 'Payment proof uploaded. Awaiting AI verification.',\n            updatedAt: serverTimestamp(),\n        });\n\n        // Trigger AI verification in the background (fire and forget)\n        // This won't be awaited, so the user gets a fast response.\n        triggerAiVerification(bookingId, paymentProofUrl, totalAmount, orderId);\n\n        return { success: true };\n\n    } catch (error) {\n        console.error(\"Error during booking update:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"An unknown error occurred.\";\n        return { success: false, error: `Failed to update booking. ${errorMessage}` };\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/booking/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createBooking as '4052ab6733676dd6ec71105b170626f6ca0dcc452b'} from 'ACTIONS_MODULE0'\nexport {updateBookingWithPayment as '40555d556b53b0cda4ba3f836ad5f0f249037d6e35'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/booking/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/booking/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/booking/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","debugId":null}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/booking/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/booking/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/booking/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwQ,GACrS,sCACA","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}